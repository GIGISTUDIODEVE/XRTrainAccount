<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로그인 & 회원가입</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' fill='%232256F5'/%3E%3Cpath d='M16 32h32' stroke='%23fff' stroke-width='6' stroke-linecap='round'/%3E%3Cpath d='M32 16v32' stroke='%23fff' stroke-width='6' stroke-linecap='round'/%3E%3C/svg%3E">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
</head>
<body>
    <main class="page-container">
        <div id="authContainer">
            <!-- 로그인 화면 -->
            <section class="page" id="loginPage">
                <div class="auth-shell">
                    <div class="auth-hero">
                        <div class="hero-icon">
                            <i class="fas fa-lock"></i>
                        </div>
                        <div class="hero-text">
                            <h1>다시 만나서 반가워요</h1>
                            <p>등록된 이메일과 비밀번호로 로그인하고 대시보드로 이동하세요.</p>
                            <ul>
                                <li><i class="fas fa-check"></i> 로그인 상태 유지 옵션 제공</li>
                                <li><i class="fas fa-check"></i> Google 계정으로 간편 로그인</li>
                                <li><i class="fas fa-check"></i> 비밀번호 찾기 지원</li>
                            </ul>
                        </div>
                    </div>
                    <div class="auth-card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-user-circle"></i>
                                <div>
                                    <h2>로그인</h2>
                                    <p>계정에 로그인하세요</p>
                                </div>
                            </div>
                            <button class="link-button" id="showSignup">회원가입으로 이동</button>
                        </div>

                        <form id="loginFormElement">
                            <div class="input-group">
                                <i class="fas fa-envelope"></i>
                                <input type="email" id="loginEmail" placeholder="이메일" required>
                            </div>

                            <div class="input-group">
                                <i class="fas fa-lock"></i>
                                <input type="password" id="loginPassword" placeholder="비밀번호" required>
                            </div>

                            <div class="form-options">
                                <label class="checkbox-container">
                                    <input type="checkbox" id="rememberMe">
                                    <span>로그인 상태 유지</span>
                                </label>
                                <a href="#" class="forgot-password">비밀번호 찾기</a>
                            </div>

                            <button type="submit" class="btn-primary">
                                <span>로그인</span>
                                <i class="fas fa-arrow-right"></i>
                            </button>

                            <div class="divider">
                                <span>또는</span>
                            </div>

                            <button type="button" class="btn-google" id="googleLogin">
                                <i class="fab fa-google"></i>
                                <span>Google로 계속</span>
                            </button>
                        </form>
                    </div>
                </div>
            </section>

            <!-- 회원가입 화면 -->
            <section class="page hidden" id="signupPage">
                <div class="auth-shell">
                    <div class="auth-hero">
                        <div class="hero-icon success">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <div class="hero-text">
                            <h1>새 계정 만들기</h1>
                            <p>필수 정보를 입력하고 연구 참여를 관리하세요.</p>
                            <ul>
                                <li><i class="fas fa-check"></i> 개인 기본 정보와 연구 상태 입력</li>
                                <li><i class="fas fa-check"></i> 이용약관 동의 확인</li>
                                <li><i class="fas fa-check"></i> 가입 후 자동으로 대시보드 이동</li>
                            </ul>
                        </div>
                    </div>
                    <div class="auth-card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-id-card"></i>
                                <div>
                                    <h2>회원가입</h2>
                                    <p>새 계정을 만드세요</p>
                                </div>
                            </div>
                            <button class="link-button" id="showLogin">로그인으로 돌아가기</button>
                        </div>

                        <form id="signupFormElement">
                            <div class="grid two-column">
                                <div class="input-group">
                                    <i class="fas fa-user"></i>
                                    <input type="text" id="signupFullName" placeholder="이름" required>
                                </div>
                                <div class="input-group">
                                    <i class="fas fa-at"></i>
                                    <input type="text" id="signupUsername" placeholder="사용자명" required>
                                </div>
                            </div>

                            <div class="grid two-column">
                                <div class="input-group">
                                    <i class="fas fa-envelope"></i>
                                    <input type="email" id="signupEmail" placeholder="이메일" required>
                                </div>
                                <div class="input-group">
                                    <i class="fas fa-calendar"></i>
                                    <input type="date" id="signupBirthDate" placeholder="생년월일" required>
                                </div>
                            </div>

                            <div class="grid two-column">
                                <div class="input-group">
                                    <i class="fas fa-hourglass-half"></i>
                                    <input type="number" id="signupAge" placeholder="생년월일 기준 만나이 자동 계산" min="0" readonly>
                                </div>
                                <div class="input-group">
                                    <i class="fas fa-venus-mars"></i>
                                    <select id="signupGender" required>
                                        <option value="" disabled selected>성별을 선택하세요</option>
                                        <option value="male">남성</option>
                                        <option value="female">여성</option>
                                        <option value="other">기타/응답 안함</option>
                                    </select>
                                </div>
                            </div>

                            <div class="grid two-column">
                                <div class="input-group">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <input type="text" id="signupRegion" placeholder="거주지역" required>
                                </div>
                                <div class="input-group">
                                    <i class="fas fa-user-check"></i>
                                    <select id="signupStatus" required>
                                        <option value="active" selected>활동 중</option>
                                        <option value="paused">일시 중단</option>
                                        <option value="completed">참여 완료</option>
                                    </select>
                                </div>
                            </div>

                            <div class="input-group condition-group">
                                <div class="field-label-row">
                                    <label class="field-label" for="signupConditionInput">질환명</label>
                                    <p class="input-hint">예: 천식, 알레르기 비염, 아토피</p>
                                </div>
                                <div class="condition-row">
                                    <div class="condition-input-wrapper">
                                        <i class="fas fa-stethoscope"></i>
                                        <input type="text" id="signupConditionInput" placeholder="질환명을 하나씩 입력 후 + 버튼을 누르세요">
                                    </div>
                                    <button type="button" class="btn-add-condition" id="addConditionBtn" aria-label="질환명 추가">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                                <div class="condition-chips" id="conditionChips"></div>
                            </div>

                            <div class="input-group">
                                <i class="fas fa-lock"></i>
                                <input type="password" id="signupPassword" placeholder="비밀번호" required>
                            </div>

                            <div class="input-group">
                                <i class="fas fa-lock"></i>
                                <input type="password" id="signupConfirmPassword" placeholder="비밀번호 확인" required>
                            </div>

                            <div class="input-group">
                                <i class="fas fa-sticky-note"></i>
                                <textarea id="signupNotes" placeholder="기타 (선택)" rows="3"></textarea>
                            </div>

                            <div class="form-options">
                                <label class="checkbox-container">
                                    <input type="checkbox" id="agreeTerms" required>
                                    <span>이용약관에 동의합니다</span>
                                </label>
                            </div>

                            <button type="submit" class="btn-primary">
                                <span>회원가입</span>
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </form>
                    </div>
                </div>
            </section>
        </div>

        <!-- 마이페이지 -->
        <section class="page hidden" id="profilePage">
            <div class="dashboard-container hidden" id="dashboardContainer">
                <div class="dashboard-header">
                    <div>
                        <p class="eyebrow">마이페이지</p>
                        <h1>계정 관리</h1>
                        <p class="subtitle">관리자 정보와 참가자 데이터를 한 곳에서 관리하세요.</p>
                    </div>
                    <div class="header-actions">
                        <span class="user-chip" id="userDisplayName">사용자</span>
                        <button class="btn-secondary" id="editProfileBtn">
                            <i class="fas fa-edit"></i>
                            <span>관리자 정보 수정</span>
                        </button>
                        <button class="btn-logout" id="logoutBtn">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>로그아웃</span>
                        </button>
                    </div>
                </div>

                <div class="dashboard-tabs">
                    <button class="tab-button active" data-target="adminView" id="tabAdmin">관리자 정보</button>
                    <button class="tab-button" data-target="participantView" id="tabParticipants">참가자 관리</button>
                </div>

                <div class="dashboard-panels">
                    <div class="dashboard-content" id="adminView">
                        <div class="welcome-card">
                            <div class="welcome-header">
                                <i class="fas fa-user-shield"></i>
                                <div>
                                    <h2>관리자 정보</h2>
                                    <p class="welcome-message">현재 로그인한 관리자 계정입니다.</p>
                                </div>
                            </div>
                            <div class="admin-grid">
                                <div class="admin-summary">
                                    <div class="summary-row">
                                        <span class="summary-label">이름</span>
                                        <span class="summary-value" id="dashboardFullName">-</span>
                                    </div>
                                    <div class="summary-row">
                                        <span class="summary-label">이메일</span>
                                        <span class="summary-value" id="dashboardEmail">-</span>
                                    </div>
                                    <div class="summary-row">
                                        <span class="summary-label">가입일</span>
                                        <span class="summary-value" id="dashboardJoinDate">-</span>
                                    </div>
                                    <div class="summary-row">
                                        <span class="summary-label">담당 참가자 수</span>
                                        <span class="summary-value" id="participantCount">0</span>
                                    </div>
                                </div>
                                <div class="admin-detail">
                                    <div class="detail-item">
                                        <i class="fas fa-user"></i>
                                        <div>
                                            <span class="info-label">사용자명</span>
                                            <span class="info-value" id="dashboardUsername">-</span>
                                        </div>
                                    </div>
                                    <div class="detail-item">
                                        <i class="fas fa-birthday-cake"></i>
                                        <div>
                                            <span class="info-label">생년월일</span>
                                            <span class="info-value" id="dashboardBirthDate">-</span>
                                        </div>
                                    </div>
                                    <div class="detail-item">
                                        <i class="fas fa-hourglass-half"></i>
                                        <div>
                                            <span class="info-label">나이</span>
                                            <span class="info-value" id="dashboardAge">-</span>
                                        </div>
                                    </div>
                                    <div class="detail-item">
                                        <i class="fas fa-venus-mars"></i>
                                        <div>
                                            <span class="info-label">성별</span>
                                            <span class="info-value" id="dashboardGender">-</span>
                                        </div>
                                    </div>
                                    <div class="detail-item">
                                        <i class="fas fa-map-marker-alt"></i>
                                        <div>
                                            <span class="info-label">거주지역</span>
                                            <span class="info-value" id="dashboardRegion">-</span>
                                        </div>
                                    </div>
                                    <div class="detail-item">
                                        <i class="fas fa-stethoscope"></i>
                                        <div>
                                            <span class="info-label">질환명</span>
                                            <span class="info-value" id="dashboardConditions">-</span>
                                        </div>
                                    </div>
                                    <div class="detail-item">
                                        <i class="fas fa-user-check"></i>
                                        <div>
                                            <span class="info-label">참가자 상태</span>
                                            <span class="info-value" id="dashboardStatus">-</span>
                                        </div>
                                    </div>
                                    <div class="detail-item">
                                        <i class="fas fa-sticky-note"></i>
                                        <div>
                                            <span class="info-label">기타</span>
                                            <span class="info-value" id="dashboardNotes">-</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-content hidden" id="participantView">
                        <div class="welcome-card participants-card">
                            <div class="participants-header">
                                <div>
                                    <p class="eyebrow">참가자 관리</p>
                                    <h2>참가자 목록</h2>
                                    <p class="welcome-message">관리자와 별도로 참가자 정보를 추가·수정하세요.</p>
                                </div>
                                <button class="btn-primary" id="addParticipantBtn">
                                    <i class="fas fa-user-plus"></i>
                                    <span>참가자 추가</span>
                                </button>
                            </div>

                            <div class="table-wrapper">
                                <table class="participant-table">
                                    <thead>
                                        <tr>
                                            <th>이름</th>
                                            <th>이메일</th>
                                            <th>가입일</th>
                                            <th>생년월일 / 만나이</th>
                                            <th>성별</th>
                                            <th>거주지역</th>
                                            <th>질환명</th>
                                            <th>상태</th>
                                            <th>기타</th>
                                            <th>마지막 접속</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody id="participantTableBody">
                                        <tr class="empty-row">
                                            <td colspan="11">등록된 참가자가 없습니다. 오른쪽 상단의 참가자 추가 버튼을 눌러 새 데이터를 입력하세요.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 프로필 수정 모달 -->
    <div class="modal-overlay hidden" id="editProfileModal">
        <div class="modal-card">
            <div class="modal-header">
                <div>
                    <p class="eyebrow">마이페이지</p>
                    <h2>정보 수정</h2>
                </div>
                <button class="icon-button" id="closeEditModal" aria-label="닫기">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <form id="editProfileForm" class="modal-form">
                <div class="grid two-column">
                    <div class="input-group">
                        <i class="fas fa-user-check"></i>
                        <select id="editStatus" required>
                            <option value="active">활동 중</option>
                            <option value="paused">일시 중단</option>
                            <option value="completed">참여 완료</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-map-marker-alt"></i>
                        <input type="text" id="editRegion" placeholder="거주지역" required>
                    </div>
                </div>

                <div class="input-group condition-group">
                    <div class="field-label-row">
                        <label class="field-label" for="editConditionInput">질환명</label>
                        <p class="input-hint">예: 천식, 알레르기 비염, 아토피</p>
                    </div>
                    <div class="condition-row">
                        <div class="condition-input-wrapper">
                            <i class="fas fa-stethoscope"></i>
                            <input type="text" id="editConditionInput" placeholder="질환명을 하나씩 입력 후 + 버튼을 누르세요">
                        </div>
                        <button type="button" class="btn-add-condition" id="editAddConditionBtn" aria-label="질환명 추가">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div class="condition-chips" id="editConditionChips"></div>
                </div>

                <div class="input-group">
                    <i class="fas fa-sticky-note"></i>
                    <textarea id="editNotes" placeholder="기타 (선택)" rows="3"></textarea>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancelEdit">취소</button>
                    <button type="submit" class="btn-primary">
                        <span>저장</span>
                        <i class="fas fa-check"></i>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- 참가자 추가/수정 모달 -->
    <div class="modal-overlay hidden" id="participantModal">
        <div class="modal-card">
            <div class="modal-header">
                <div>
                    <p class="eyebrow">참가자 관리</p>
                    <h2 id="participantModalTitle">참가자 추가</h2>
                </div>
                <button class="icon-button" id="closeParticipantModal" aria-label="닫기">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <form id="participantForm" class="modal-form">
                <div class="grid two-column">
                    <div class="input-group">
                        <i class="fas fa-user"></i>
                        <input type="text" id="participantName" placeholder="이름" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="participantEmail" placeholder="이메일" required>
                    </div>
                </div>

                <div class="grid two-column">
                    <div class="input-group">
                        <i class="fas fa-calendar"></i>
                        <input type="date" id="participantBirthDate" placeholder="생년월일" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-hourglass-half"></i>
                        <input type="number" id="participantAge" placeholder="만나이 자동 계산" readonly>
                    </div>
                </div>

                <div class="grid two-column">
                    <div class="input-group">
                        <i class="fas fa-venus-mars"></i>
                        <select id="participantGender" required>
                            <option value="" disabled selected>성별 선택</option>
                            <option value="male">남성</option>
                            <option value="female">여성</option>
                            <option value="other">기타/응답 안함</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-map-marker-alt"></i>
                        <input type="text" id="participantRegion" placeholder="거주지역" required>
                    </div>
                </div>

                <div class="input-group condition-group">
                    <div class="field-label-row">
                        <label class="field-label" for="participantConditionInput">질환명</label>
                        <p class="input-hint">예: 천식, 알레르기 비염, 아토피</p>
                    </div>
                    <div class="condition-row">
                        <div class="condition-input-wrapper">
                            <i class="fas fa-stethoscope"></i>
                            <input type="text" id="participantConditionInput" placeholder="질환명을 하나씩 입력 후 + 버튼을 누르세요">
                        </div>
                        <button type="button" class="btn-add-condition" id="participantAddConditionBtn" aria-label="질환명 추가">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div class="condition-chips" id="participantConditionChips"></div>
                </div>

                <div class="grid two-column">
                    <div class="input-group">
                        <i class="fas fa-user-check"></i>
                        <select id="participantStatus" required>
                            <option value="active" selected>활동 중</option>
                            <option value="paused">일시 중단</option>
                            <option value="completed">참여 완료</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-clock"></i>
                        <input type="datetime-local" id="participantLastSeen" placeholder="마지막 접속일시">
                    </div>
                    <div class="condition-chips" id="editConditionChips"></div>
                </div>

                <div class="input-group">
                    <i class="fas fa-sticky-note"></i>
                    <textarea id="participantNotes" placeholder="기타 (선택)" rows="3"></textarea>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancelParticipant">취소</button>
                    <button type="submit" class="btn-primary">
                        <span>저장</span>
                        <i class="fas fa-check"></i>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- 알림 토스트 -->
    <div class="toast hidden" id="toast">
        <i class="fas fa-info-circle"></i>
        <span id="toastMessage"></span>
    </div>

    <script type="module" src="js/auth.js"></script>
</body>
</html>
